<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>登录界面</title>
    <link href="base.css" rel="stylesheet" type="text/css" />

  </head>

  <body>
    <div id="box">
    </br>
      邮箱
      <input
        type="text" 
        name="Email"
        id="email" 
        style="background-color: rgb(183, 179, 179)"/>
      密码
      <input
        type="password"
        name="Pass"
        id="password"
        style="background-color: rgb(183, 179, 179)"
      />
      <div id="guo">登录</div>
    </div>
    <script>
      let msg = [
        {
          name: "张三",
          age: 20,
          strengths: "JavaScript",
          avatar:
            "https://tse4-mm.cn.bing.net/th/id/OIP-C.39mOMBjUfsK-HL9jUbv1MwHaE7?pid=ImgDet&rs=1",
          email: "yunding@qq.com",
          password: 33333,
        },
        {
          name: "李四",
          age: 19,
          strengths: "python",
          avatar:
            "https://tse2-mm.cn.bing.net/th/id/OIP-C.YlKimVo94OkaZDZCzPIDpAHaFh?pid=ImgDet&rs=1",
          email: "12345678@163.com",
          password: 11111,
        },
        {
          name: "王五",
          age: 18,
          strengths: "Java",
          avatar:
            "https://tse2-mm.cn.bing.net/th/id/OIP-C.P2hK9SRjhFE8WM9N8tgWFAHaEQ?pid=ImgDet&rs=1",
          email: "yundingshuyuan@qq.cn",
          password: 222222,
        },
      ];
      //构造正则表达式
      let reg = /(@qq.com)$|(@qq.cn)$|(@163.com)|(@qq.com)(.){1}/;
      //分别存储各个数据
      let em = [];
      for (i = 0; i < msg.length; i++) {
        em[i] = msg[i].email;
      }
      let pa = [];
      for (i = 0; i < msg.length; i++) {
        pa[i] = msg[i].password;
      }
      let im = [];
      for (i = 0; i < msg.length; i++) {
        im[i] = msg[i].avatar;
      }
      //定义变量
      let email = document.getElementById("email");
      let password = document.getElementById("password");
      let guo = document.getElementById("guo");
      let div = document.createElement("div");
      let a = document.createElement("a");
      let img = document.createElement("img");
      let span = document.createElement("span");
      let flag = true;

      //绑定鼠标单击函数
      guo.onclick = function () {
        console.log("666");
        //首先确认邮箱格式是否正确
        for (i = 0; i < em.length; i++) {
          if (reg.test(email.value) == true) {
            console.log("邮箱格式正确！");
            break;
          } else {
            alert("邮箱格式不正确⊙﹏⊙∥");
            break;
          }
        }
        //再确认邮箱是否在msg数组里
        for (i = 0; i < em.length; i++) {
          if (email.value == em[i]) {
            flag = true;
            console.log("邮箱已注册！");
            break;
          } else {
            flag = false;
          }
        }
        if (flag == false) {
          alert("该邮箱未注册！\(￣︶￣*\))");
        }
        //再进行密码的校验，如果密码正确，打印个人消息
        for (i = 0; i < em.length; i++) {
          if (reg.test(msg[i].email) == true) {
            if (email.value === em[i]) {
              if (password.value == pa[i]) {
                console.log("密码正确！");
                // document.write("<div >登录成功( •̀ ω •́ )✧" + "<br/></div>"); //在document.write内想要换行，\n只有空格作用，\r只有空格作用，只有用+"<br/>"才有换行的作用
                box.appendChild(div);
                div.innerText = "登录成功( •̀ ω •́ )✧";
                box.appendChild(img);
                img.src = im[i];
                box.appendChild(a);
                a.textContent = `姓名:${msg[i].name}`;
                box.appendChild(span);
                span.textContent = `年龄:${msg[i].age}`;
                //  box.insertBefore(div,box1.children[box1.length-1])
                // div.textContent=`年龄:${msg[i].age}`                     //不知道哪里用错了,只能换方法了
                box.appendChild(div);
                div.textContent = `特长:${msg[i].strengths}`;

                break;
              } else {
                alert("密码错误!请重新登录＞﹏＜");
                return;
              }
            }
          }
        }
      };
    </script>
  </body>
</html>
